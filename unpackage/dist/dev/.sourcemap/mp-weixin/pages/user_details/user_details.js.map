{"version":3,"sources":["uni-app:///main.js",null,"webpack:///E:/github/FruitSalesAndTravelWeb/pages/user_details/user_details.vue?9440","webpack:///E:/github/FruitSalesAndTravelWeb/pages/user_details/user_details.vue?5692","webpack:///E:/github/FruitSalesAndTravelWeb/pages/user_details/user_details.vue?b690","uni-app:///pages/user_details/user_details.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iH;AACAA,UAAU,CAACC,qBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;;;AAG3D;AACoL;AACpL,gBAAgB,6LAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAirB,CAAgB,ssBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2CrsB,8E;AACA;AACA,MADA,kBACA;AACA;AACA;AACA,eAFA;AAGA,wBAHA;AAIA;AACA,qBADA;AAEA,oBAFA;AAGA,oBAHA;AAIA,kBAJA;AAKA,iBALA;AAMA,iBANA,EAJA;;AAYA,gBAZA;AAaA,iBAbA;AAcA,qBAdA;AAeA,oBAfA;AAgBA,iBAhBA;;AAkBA,GApBA;AAqBA;AACA;AACA;AACA,qBADA;AAEA,2BAFA;AAGA,uBAHA;AAIA,+BAJA;;AAMA;AACA,wBADA;AAEA,4BAFA;AAGA,qBAHA;AAIA,2BAJA,EANA;;AAYA;AACA,wBADA;AAEA,2BAFA;AAGA,wBAHA;AAIA,8BAJA,EAZA;;AAkBA;AACA,qBADA;AAEA,0BAFA;AAGA,qBAHA;AAIA,8BAJA,EAlBA;;;AAyBA;AACA;AACA;AACA;AACA,mCADA;AAEA,sBAFA;;AAIA;AACA,KAnCA;;AAqCA;AACA;AACA,KAvCA;;AAyCA,eAzCA,yBAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA,OAdA;AAeA,KA1DA;;AA4DA,gBA5DA,wBA4DA,CA5DA,EA4DA;AACA;AACA;AACA;AACA,KAhEA;;AAkEA,eAlEA,yBAkEA;AACA;AACA,gBADA,EACA;AACA,gCAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA;AACA,WANA;AAOA,SAZA;;AAcA,KAjFA;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,yBADA;AAEA,wBAFA;;AAIA;AACA;AACA,iCADA;;AAGA,WAJA,EAIA,IAJA;AAKA,SAVA,EAUA,KAVA,CAUA;AACA;AACA,gCADA;AAEA,wBAFA;;AAIA,SAfA;AAgBA;AACA,KA9GA,EArBA;;;;;AAwIA;AACA;AACA,GA1IA,E","file":"pages/user_details/user_details.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user_details/user_details.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user_details.vue?vue&type=template&id=0d8636c6&\"\nvar renderjs\nimport script from \"./user_details.vue?vue&type=script&lang=js&\"\nexport * from \"./user_details.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user_details/user_details.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user_details.vue?vue&type=template&id=0d8636c6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user_details.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user_details.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<form v-if=\"seen\">\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">头像</view>\r\n\t\t\t\t<view class=\"cu-avatar radius bg-gray\" :style=\"'background-image:url('+form.avatarUrl+');'\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">用户名</view>\r\n\t\t\t\t<input v-model=\"form.userName\" :placeholder=\"form.userName === null ? '请输入用户名' : form.userName\"\r\n\t\t\t\t\tname=\"userName\"></input>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t<view class=\"title\">真实姓名</view>\r\n\t\t\t\t<input v-model=\"form.realName\" name=\"realName\"\r\n\t\t\t\t\t:placeholder=\"form.realName === null ? '请输入真实姓名' : form.userName\"></input>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t<view class=\"title\">性别</view>\r\n\t\t\t\t<picker @change=\"PickerChange\" :value=\"index\" :range=\"picker\">\r\n\t\t\t\t\t<view class=\"picker\">\r\n\t\t\t\t\t\t{{index>-1?picker[index]:'未知'}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t<view class=\"title\">Email</view>\r\n\t\t\t\t<input v-model=\"form.email\" :placeholder=\"form.email === null ? '请输入电子邮箱' : form.userName\"\r\n\t\t\t\t\tname=\"email\"></input>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t<view class=\"title\">手机号</view>\r\n\t\t\t\t<input v-model=\"form.phone\" :placeholder=\"form.phone === null ? '请输入手机号' : form.userName\"\r\n\t\t\t\t\tname=\"phone\"></input>\r\n\t\t\t</view>\r\n\t\t</form>\r\n\t\t<view class=\"padding flex flex-direction margin-top: 50px\" @click=\"Edit2\">\r\n\t\t\t<button class=\"cu-btn bg-green lg\">保存信息</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar graceChecker = require(\"../../utils/graceChecker.js\");\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t//个人的数据\r\n\t\t\t\tindex: -1,\r\n\t\t\t\tpicker: ['男', '女'],\r\n\t\t\t\tform: {\r\n\t\t\t\t\tavatarUrl: \"\",\r\n\t\t\t\t\tuserName: \"\",\r\n\t\t\t\t\trealName: \"\",\r\n\t\t\t\t\tgender: \"\",\r\n\t\t\t\t\tphone: \"\",\r\n\t\t\t\t\temail: \"\",\r\n\t\t\t\t},\r\n\t\t\t\tseen: true,\r\n\t\t\t\tlook: false,\r\n\t\t\t\tcheckRes: false,\r\n\t\t\t\tpopMessage: \"\",\r\n\t\t\t\tpopType: \"\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcheckform: function() {\r\n\t\t\t\tvar rule = [{\r\n\t\t\t\t\t\tname: \"phone\",\r\n\t\t\t\t\t\tcheckType: \"string\",\r\n\t\t\t\t\t\tcheckRule: \"11\",\r\n\t\t\t\t\t\terrorMsg: \"请输入11位数的手机号\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"userName\",\r\n\t\t\t\t\t\tcheckType: \"notnull\",\r\n\t\t\t\t\t\tcheckRule: \"\",\r\n\t\t\t\t\t\terrorMsg: \"用户名不能为空\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"realName\",\r\n\t\t\t\t\t\tcheckType: \"string\",\r\n\t\t\t\t\t\tcheckRule: \"2,4\",\r\n\t\t\t\t\t\terrorMsg: \"请输入正确的真实姓名\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"email\",\r\n\t\t\t\t\t\tcheckType: \"email\",\r\n\t\t\t\t\t\tcheckRule: \"\",\r\n\t\t\t\t\t\terrorMsg: \"请输入正确的真实姓名\"\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t\tvar formData = this.form;\r\n\t\t\t\tthis.checkRes = graceChecker.check(formData, rule);\r\n\t\t\t\tif (!this.checkRes) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: graceChecker.error,\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttap: function() {\r\n\t\t\t\twx.navigateBack({})\r\n\t\t\t},\r\n\r\n\t\t\trequestData() {\r\n\t\t\t\tconst token = uni.getStorageSync('token');\r\n\t\t\t\tthis.$api.getUserInfo(token).then(res => {\r\n\t\t\t\t\tconsole.log(\"requestData\")\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tthis.form.avatarUrl = res.data.avatarUrl;\r\n\t\t\t\t\tthis.form.userName = res.data.userName;\r\n\t\t\t\t\tthis.form.realName = res.data.realName;\r\n\t\t\t\t\tthis.form.email = res.data.email;\r\n\t\t\t\t\tthis.index = res.data.gender\r\n\t\t\t\t\tif (res.data.gender === '0') {\r\n\t\t\t\t\t\tthis.form.gender = '男'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.form.gender = '女'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.form.phone = res.data.phone;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tPickerChange(e) {\r\n\t\t\t\tthis.index = e.detail.value\r\n\t\t\t\tthis.form.gender = this.picker[e.detail.value];\r\n\t\t\t\tconsole.log(this.form.gender)\r\n\t\t\t},\r\n\r\n\t\t\tChooseImage() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1, //默认9\r\n\t\t\t\t\tsizeType: [\"compressed\"],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths\r\n\t\t\t\t\t\tthis.$api.uploadImage(tempFilePaths[0]).then(resp => {\r\n\t\t\t\t\t\t\tlet res = JSON.parse(resp)\r\n\t\t\t\t\t\t\tif (res.status === 0) {\r\n\t\t\t\t\t\t\t\tthis.form.avatarUrl = this.$request.getbaseUrl() + \"/img/\" + res\r\n\t\t\t\t\t\t\t\t\t.data\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tEdit2: function() {\r\n\t\t\t\tvar updateUser = Object.assign({}, this.form);\r\n\t\t\t\tupdateUser.gender = this.index\r\n\t\t\t\tconsole.log(\"update\")\r\n\t\t\t\tconsole.log(updateUser)\r\n\t\t\t\tthis.checkform()\r\n\t\t\t\tif (!this.checkRes) {\r\n\t\t\t\t\tthis.checkform()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar that = this\r\n\t\t\t\t\tthis.$api.updateUser(updateUser).then(res => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"修改成功\",\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t  url: '../mine/mine'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, 1300);\r\n\t\t\t\t\t}).catch(resp => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"修改失败，请稍后再试!\",\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t},\r\n\r\n\t\tcreated: function() {\r\n\t\t\tthis.requestData()\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n"],"sourceRoot":""}